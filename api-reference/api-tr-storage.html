<h1 name="class-classTitle">Class ydn.db.tr.Storage</h1>

<p>
This class extends <code>ydn.db.core.Storage</code> and provides robust parallel transaction queues.
</p>
<dl name="class-detailList">
  <dt name="class-heading">Extends:</dt>

  <dd>Super class constructor: <a href="https://sites.google.com/a/yathit.com/ydn-dev/api-reference/ydn-db-core">ydn.db.core.Storage</a>.</dd>
</dl>
<table cellspacing="0" name="class-summaryTable">



  <caption>
    Class Summary
  </caption>


  <thead>


  <tr>


    <th>Constructor Attributes</th>


    <th>Constructor Name and Description</th>
  </tr>
  </thead>


  <tbody>


  <tr>

    <td name="class-attributes">&nbsp;</td>




    <td name="class-nameDescription">



      <div name="class-fixedFont">
        <b><a href="#constructor">ydn.db.tr.Storage</a></b>(name, schema, option)
      </div>


      <div name="class-description">
        Create a suitable storage mechanism.
      </div>
    </td>
  </tr>
  </tbody>
</table>


<table cellspacing="0" name="class-summaryTable">


  <caption>
    Method Summary
  </caption>



  <thead>


  <tr>



    <th>Method Attributes</th>




    <th>Method Name and Description</th>
  </tr>
  </thead>



  <tbody>

  <tr>



    <td name="class-attributes">&nbsp;</td>




    <td name="class-nameDescription">



      <div name="class-fixedFont">
        <b><a href="#transaction">transaction</a></b>(transaction_callback, store_names,
        mode, completed_event_handler)
      </div>




      <div name="class-description">
        Perform a database transaction.
      </div>
    </td>
  </tr>




  </tbody>
</table>



<div name="class-sectionTitle">
  Method Detail
</div>



<a name="transaction"></a>


<div name="class-fixedFont">
  <b>transaction</b>(transaction_callback, store_names,
  mode, completed_event_handler)
</div>


<div name="class-description">
  Preform a isolated non-overlapping database transaction asynchronously. If invoke from base
<code>ydn.db.Storage</code> instance, this create a new transaction queue. Subsequents call
from the <code>ydn.db.tr.Storage</code> create non-overlapping transaction.</div>


<dl name="class-detailList">
  <dt name="class-heading">Parameters:</dt>

  <dt><span name="class-light fixedFont">{!function(ydn.db.tr.ITxStorage: tx)}</span> <b>transaction_callback</b></dt>

  <dd>Transaction in callback function. The callback is invoked <code>ydn.db.tr.ITxStorage</code> instance.
    Use <code>tx.getTx()</code> to get active transaction object, which could be either of  <code>IDBTransaction</code>,
    <code>SQLTransaction</code>, or <code>localStorage</code> depending on runtime environment.
    It returns <code>null</code> when transaction is no longer active.
    <br/>
    Use <code>tx.transaction(...)</code> to create another transaction from the queue. The callback will
    be invoked when previous one is completed.
  </dd>

  <dt><span name="class-light fixedFont">{Array.}</span> <b>store_names</b></dt>

  <dd>List of store name. If empty list, all stores are open.</dd>

  <dt><span name="class-light fixedFont">{string}</span> <b>mode</b></dt>

  <dd>Transaction mode: <code>readonly</code> (default) or <code>readwrite</code>.</dd>

  <dt><span name="class-light fixedFont">{function(string: type, *: event)}</span> <b>completed_event_handler</b></dt>

  <dd>Handle event for transaction <code>completed</code>, <code>error</code> or <code>abort</code> event type.
    If provided, handler will be called once and only once immediately after the transacting become
    inactive. </dd>

  <dt><span name="class-light fixedFont">{...}</span> <b>opt_var_args</b></dt>

  <dd>Optional variable arguments pass back to <code>transaction_callback</code> prepending argument <code>tx</code></dd>


  <br>



</dl>
